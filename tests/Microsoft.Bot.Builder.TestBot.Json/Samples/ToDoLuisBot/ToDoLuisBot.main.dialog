{
    "$schema": "../../app.schema",
    "$kind": "Microsoft.AdaptiveDialog",
    "autoEndDialog": false,
    "generator": "ToDoLuisBot.lg",
    "recognizer": {
        "$kind": "Microsoft.HttpRecognizer",
        "method": "Get",
        "url": "http://localhost:5000/recognize/${uriComponent(turn.activity.text)}",
        "intents": "\\{${join(foreach(cats,cat,concat(cat.key,':{\"score\":\"',string(cat.value),'\"}')),',')}\\}",
        "entities": "{\"TaskContentML\": [ ${join(foreach(where(ents,x,x[0]=='TaskContentML'),x,concat('\"',x[1],'\"')),',')} ], \"ListType\": [ ${join(foreach(where(ents,x,x[0]=='ListType'),x,concat('\"',x[1],'\"')),',')} ]}"
    },
    "triggers": [
        {
            "$kind": "Microsoft.OnBeginDialog",
            "actions": [
                {
                    "$kind": "Microsoft.SendActivity",
                    "activity": "Hi"
                }
            ]
        },
        {
            "$kind": "Microsoft.OnIntent",
            "intent": "AddToDo",
            "actions": [
                "ToDoLuisBot.AddItem"
            ]
        },
        {
            "$kind": "Microsoft.OnIntent",
            "intent": "DeleteToDo",
            "actions": [
                "ToDoLuisBot.DeleteItem"
            ]
        },
        {
            "$kind": "Microsoft.OnIntent",
            "intent": "ShowToDo",
            "actions": [
                "ToDoLuisBot.ShowItems"
            ]
        },
        {
            "$kind": "Microsoft.OnUnknownIntent",
            "actions": [
                {
                    "$kind": "Microsoft.SendActivity",
                    "activity": "${LuisToDoHelp()}"
                }
            ]
        }
    ]
}