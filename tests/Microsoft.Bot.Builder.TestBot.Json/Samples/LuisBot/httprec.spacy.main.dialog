{
  "$kind": "Microsoft.AdaptiveDialog",
  "autoEndDialog": false,
  "recognizer": {
    "$kind": "Microsoft.LuisRecognizer",
    "applicationId": "{settings.luis.CacheableId}",
    "endpoint": "{settings.luis.endpoint}",
    "endpointKey": "{settings.luis.endpointKey}",
    "failureStrategy": "CacheAndFallback",
    "failureFallback": {
      "$kind": "Microsoft.HttpRecognizer",
      "method": "POST",
      "url": " http://localhost:8000/score",
      "body": {
        "input": "@{turn.activity.text}"
      },
      "intents": "\\{@{join(foreach(cats,cat,concat(cat.key,':{\"score\":\"',string(cat.value),'\"}')),',')}\\}"
    }
  },
  "triggers": [
    {
      "$kind": "Microsoft.OnBeginDialog",
      "actions": [
        {
          "$kind": "Microsoft.SendActivity",
          "activity": "Example: the movie is not good"
        }
      ]
    },
    {
      "$kind": "Microsoft.OnIntent",
      "intent": "POSITIVE",
      "actions": [
        {
          "$kind": "Microsoft.SendActivity",
          "activity": "Thanks~"
        }
      ]
    },
    {
      "$kind": "Microsoft.OnIntent",
      "intent": "NEGATIVE",
      "actions": [
        {
          "$kind": "Microsoft.SendActivity",
          "activity": "Sorry to hear that."
        }
      ]
    }
  ],
  "$schema": "../../app.schema"
}
